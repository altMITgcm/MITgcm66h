updated December 15, 2005 for iter177 ecco1x1 computation
menemenlis@jpl.nasa.gov

This verification experiment is identical global_with_exf
except that it includes CFC-11 diagnostic as per OCMIP-2
protocol (http://www.ipsl.jussieu.fr/OCMIP/).
CFC-11 output in mol/m^3 is output in files TR1.*.data
Example of how to read this output file using matlab is
in input/lookat.m

==============================================================

Configuring and running the ecco1x1 configuration with iter177
surface boundary conditions and CFC11.
Surface forcing files are assumed available in MITgcm/../iter177

1) get code:

 cvs co -r release1_50yr MITgcm_code
 cvs co -r release1_50yr MITgcm/verification/global_with_CFC11
 cd MITgcm
 cvs co -d ocean_inversion_project MITgcm_contrib/ocean_inversion_project

2) compile code:

 mkdir bin exe
 cd bin
 \cp ../verification/global_with_CFC11/code1x1/* .
 \cp ../verification/global_with_CFC11/code1x1/.g* .
 \mv KPP_OPTIONS.h_iter177 KPP_OPTIONS.h
 \mv SIZE.h.36 SIZE.h
 ../tools/genmake -mpi -platform=columbia -makefile
 make depend
 make -j

3) execute code

 cd ../exe
 \cp ../verification/global_with_CFC11/input1x1/* .
 ln -sf ../../iter177/* .
 \mv data.gmredi_iter177 data.gmredi
 \mv data_iter177 data
 \mv data.exf_iter177 data.exf
 \cp ../verification/global_with_CFC11/input/cfc1112.atm .
 \cp ../verification/global_with_CFC11/input/FICE .
 \cp ../verification/global_with_CFC11/input/PATM .
 \cp ../verification/global_with_CFC11/input/XKW .
 qsub job.36

==============================================================

Configuring 8 4x4-deg 4-cpu x 15-level experiment on chapman:

Experiment 0: Baseline integration
Experiment 1: viscAr               1e-3 -> .5E-3
Experiment 2: viscAh                5e5 -> 4e5
Experiment 3: diffKrT              3e-5 -> 2e-5
Experiment 4: diffKrS              3e-5 -> 2e-5
Experiment 5: tauThetaClimRelax 5184000 -> 4665600
Experiment 6: tauSaltClimRelax 15552000 -> 7776000
Experiment 7: GM_background_K      1000 -> 900

(note that viscAr=0.9e3 crashes during first time step)

---

cd bin
cp ../verification/global_ocean.90x40x15/code/GMREDI_OPTIONS.h .
cp ../verification/global_with_CFC11/code4x4/*.h .
cp ../verification/global_with_CFC11/code4x4/*.F .
../tools/genmake -mpi -platform=ames_opt -makefile
make depend
make -j

---

cd ../exe
\cp ../verification/global_ocean.90x40x15/input/* .
\cp ../verification/global_with_CFC11/input/cfc1112.atm .
\cp ../verification/global_with_CFC11/input4x4/FICE4x4 FICE
\cp ../verification/global_with_CFC11/input4x4/PATM4x4 PATM
\cp ../verification/global_with_CFC11/input4x4/XKW4x4 XKW
cd ..
cp -r exe exe0
cp -r exe exe1
cp -r exe exe2
cp -r exe exe3
cp -r exe exe4
cp -r exe exe5
cp -r exe exe6
cp -r exe exe7
\cp verification/global_with_CFC11/input4x4/data.0 exe0/data
\cp verification/global_with_CFC11/input4x4/data.1 exe1/data
\cp verification/global_with_CFC11/input4x4/data.2 exe2/data
\cp verification/global_with_CFC11/input4x4/data.3 exe3/data
\cp verification/global_with_CFC11/input4x4/data.4 exe4/data
\cp verification/global_with_CFC11/input4x4/data.5 exe5/data
\cp verification/global_with_CFC11/input4x4/data.6 exe6/data
\cp verification/global_with_CFC11/input4x4/data.0 exe7/data
\cp verification/global_with_CFC11/input4x4/data.gmredi exe7
qsub verification/global_with_CFC11/input4x4/jobfile

# requires about 1:40 to complete on chapman, 32-CPU queue

cd exe0
RM *.meta
RM GM* pickup* STD*
cd ../exe1
RM *.meta
RM GM* pickup* STD*
cd ../exe2
RM *.meta
RM GM* pickup* STD*
cd ../exe3
RM *.meta
RM GM* pickup* STD*
cd ../exe4
RM *.meta
RM GM* pickup* STD*
cd ../exe5
RM *.meta
RM GM* pickup* STD*
cd ../exe6
RM *.meta
RM GM* pickup* STD*
cd ../exe7
RM *.meta
RM GM* pickup* STD*

==============================================================

Configuring and running the 50-year JPL telescoping integration:

1) get code:

setenv CVSROOT :pserver:cvsanon@mitgcm.org:/u/u0/gcmpack
cvs login ( CVS password: cvsanon )
cvs co -r release1_50yr MITgcm

2) compile code:

cd MITgcm/bin
cp ../verification/global_with_CFC11/code50yr/*.h .
cp ../verification/global_with_CFC11/code50yr/*.F .
cp ../verification/global_with_CFC11/code50yr/.genmakerc .
../tools/genmake -mpi -platform=o2k -makefile
make depend
make

3) run code for first spin-up year (1931)

cd ../exe

get forcing files:
bathy_50yr.bin     NCEP_1948_sw       NCEP_1948_vstr     lev_clim_temp.bin
NCEP_1948_emp      NCEP_1948_trb      run-off.bin_1x1    lev_clim_salt.bin
NCEP_1948_sst      NCEP_1948_ustr     salt_14months.bin

\cp ../verification/global_with_CFC11/input50yr/* .
\cp ../verification/global_with_CFC11/input/cfc1112.atm .
\cp ../verification/global_with_CFC11/input/FICE .
\cp ../verification/global_with_CFC11/input/PATM .
\cp ../verification/global_with_CFC11/input/XKW .

mpirun -np 64 mitgcmuv

==============================================================

Configuring and running the ecco1x1 configuration with CFC11.
Surface forcing files are assumed available in MITgcm/../iter69

1) get code:

 cvs co -r release1_50yr MITgcm_code
 cvs co -r release1_50yr MITgcm/verification/global_with_CFC11
 cd MITgcm
 cvs co -d ocean_inversion_project MITgcm_contrib/ocean_inversion_project

2) compile code:

 mkdir bin exe
 cd bin
 \cp ../verification/global_with_CFC11/code1x1/* .
 \cp ../verification/global_with_CFC11/code1x1/.g* .
 ../tools/genmake -mpi -platform=columbia -makefile
 make depend
 make -j

3) execute code

 cd ../exe
 \cp ../verification/global_with_CFC11/input1x1/* .
 ln -sf ../../iter69/* .
 \cp ../verification/global_with_CFC11/input/cfc1112.atm .
 \cp ../verification/global_with_CFC11/input/FICE .
 \cp ../verification/global_with_CFC11/input/PATM .
 \cp ../verification/global_with_CFC11/input/XKW .
 qsub job.144 


==============================================================

Configuring and running the 50-year JPL telescoping integration with sea-ice:

1) get code:

setenv CVSROOT :pserver:cvsanon@mitgcm.org:/u/u0/gcmpack
cvs login ( CVS password: cvsanon )
cvs co -r release1_50yr MITgcm

2) compile code:

cd MITgcm/bin
cp ../verification/global_with_CFC11/code50yr/*.h .
cp ../verification/global_with_CFC11/code50yr/*.F .
cp ../verification/global_with_CFC11/code50yr/CPP_OPTIONS.h.SEAICE CPP_OPTIONS.h
cp ../verification/global_with_CFC11/code50yr/ECCO_CPPOPTIONS.h.SEAICE ECCO_CPPOPTIONS.h
cp ../verification/global_with_CFC11/code50yr/.genmakerc.SEAICE .genmakerc
../tools/genmake -mpi -platform=o2k -makefile
make depend
make

3) run code for first spin-up year (1931)

cd ../exe

get forcing files:
bathy_50yr.bin     NCEP_1948_sw       NCEP_1948_vstr     lev_clim_temp.bin
NCEP_1948_emp      NCEP_1948_trb      run-off.bin_1x1    lev_clim_salt.bin
NCEP_1948_sst      NCEP_1948_ustr     salt_14months.bin
NCEP_1948_u10m     NCEP_1948_v10m     NCEP_1948_tmp2m    NCEP_1948_spfh2m
NCEP_1948_lw       NCEP_1948_lhf      NCEP_1948_rain     

\cp ../verification/global_with_CFC11/input50yr/* .
\cp data.pkg.SEAICE data.pkg
\cp data.exf.SEAICE data.exf
\cp ../verification/global_with_CFC11/input/cfc1112.atm .
\cp ../verification/global_with_CFC11/input/FICE .
\cp ../verification/global_with_CFC11/input/PATM .
\cp ../verification/global_with_CFC11/input/XKW .

mpirun -np 64 mitgcmuv
